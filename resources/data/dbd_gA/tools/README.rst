==============================
BxDecay0 DBD gA dataset
==============================

Original Phase-Space Factors (PSF) datasets provided by Rastislav Dvornicki (email: dvornicky@fmph.uniba.sk).


Supported isotopes:

 * ``Se82``  : Qbb = 2.99512 MeV, E_min = 0.12 keV
 * ``Mo100`` : Qbb = 3.0344 MeV, E_min = 0.4 keV
 * ``Cd116`` : Qbb = 2.8135 MeV, E_min = 0.5 keV
 * ``Nd150`` : Qbb = 3.37138 MeV, E_min = 0.38 keV

Supported modes:

 * ``g0`` 
 * ``g2`` 
 * ``g22``
 * ``g4`` 


Original files
==============

Tabulated p.d.f. files are provided by Radislav.

Each of them uses a simple 3-columns ASCII format:

  E1 (MeV) E2 (MeV) PhaseSpace

Size of these files is 200-280 Mo each.

Remarks:

- we should know which Qbb has been used to compute the p.d.f.
- we should know which approximation of the Fermi function has been
  used.


Generation of tabulated probability data files
================================================

The ``generate.bash`` script launch the automated generation of files
with tabulated cumulative  density function in the  (E1-E2) space.  It
uses the original  files as input. A special optimized  format is used
to encode the probabilities and minimizing precision loss.

.. code:: bash

   $ bash generate.bash \
      --input-orig-dir "/opt/ga" \
      --output-base-dir "/tmp/${USER}/dbd_ga/dataset"
..


The ``mkocdfdata.py`` script is used to produce individual
tabulated c.d.f. files:

Typical usages:

.. code:: bash

   $ python3 mkocdfdata.py /opt/ga/082Se/1-N2/nEqTwo.dat     Se82  g2  2.998
   $ python3 mkocdfdata.py /opt/ga/100Mo/0-N0/nEqNull.dat    Mo100 g0  3.035
   $ python3 mkocdfdata.py /opt/ga/116Cd/2-N22/nEqTwoTwo.dat Cd116 g22 2.813
   $ python3 mkocdfdata.py /opt/ga/150Nd/3-N4/nEqFour.dat    Nd150 g4  3.371
..

Output files use conventional names:

- ``tab_ocdf.data`` for the tabulated joint cumulative density function (used through
  the *inverse transform method*);
- ``tab_pdf.data`` for the tabulated joint probability density function (used through
  the *Von Neuman/rejection method*);


Installation of the generated tabulated probability data files
===============================================================

The files generated by the above scripts must be installed:

- from the BxDecay0 source directory to the ``resources/data/dbd_gA/`` directory
  for tests and development,
- from the BxDecay0 installation directory to the ``share/BxDecay0-1.0.1/resources/data/dbd_gA/``
  directory for production,

Installation uses the following layout:

::
   
  resources/data/dbd_gA/
  |-- Cd116
  |   |-- g0
  |   |   |-- tab_ocdf.data
  |   |   `-- tab_pdf.data
  |   |-- g2  
  |   |   |-- tab_ocdf.data
  |   |   `-- tab_pdf.data
  |   |-- g22
  |   |   |-- tab_ocdf.data
  |   |   `-- tab_pdf.data
  |   `-- g4
  |       |-- tab_ocdf.data
  |       `-- tab_pdf.data
  |-- Mo100
  |   |-- g0
  |   |   |-- tab_ocdf.data
  |   |   `-- tab_pdf.data
  |   |-- g2
  |   |   |-- tab_ocdf.data
  |   |   `-- tab_pdf.data
  |   |-- g22
  |   |   |-- tab_ocdf.data
  |   |   `-- tab_pdf.data
  |   `-- g4
  |       |-- tab_ocdf.data
  |       `-- tab_pdf.data
  |-- Nd150
  |   |-- g0
  |   |   |-- tab_ocdf.data
  |   |   `-- tab_pdf.data
  |   |-- g2
  |   |   |-- tab_ocdf.data
  |   |   `-- tab_pdf.data 
  |   |-- g22
  |   |   |-- tab_ocdf.data
  |   |   `-- tab_pdf.data
  |   `-- g4
  |       |-- tab_ocdf.data
  |       `-- tab_pdf.data
  `-- Se82
      |-- g0
      |   |-- tab_ocdf.data
      |   `-- tab_pdf.data
      |-- g2
      |   |-- tab_ocdf.data
      |   `-- tab_pdf.data
      |-- g22
      |   |-- tab_ocdf.data
      |   `-- tab_pdf.data
      `-- g4
        |-- tab_ocdf.data
        `-- tab_pdf.data

..

.. end


